<!DOCTYPE html>
<html>
<!--
File: iot-cloud-starter-guide.html
Description: IoT Cloud Starter Guide.
Author: Mikael Kindborg
Copyright (c) 2013-2016 Evothings AB
-->
<head>
<meta charset="utf-8">
<script src="../js/include-head.js"></script>
<title>IoT Cloud Starter Guide - Networking for Mobile Apps</title>
</head>

<body>

<div class="evo-page">
<script src="../js/include-page-header.js"></script>
<div class="evo-content">

<div class="evo-content-box">

<h1>IoT Cloud Starter Guide - Networking for Mobile Apps</h1>

<p>A common application for the Internet of Things is sending data to some cloud service, for further processing storage and analysis. Data analysis and Business intelligence are important areas for IoT. This guide helps you sorting out the options for communication with cloud servers from a mobile app.</p>

<h2>Secure connections - HTTP vs HTTPS and WS vs WSS</h2>

<p>One thing to be aware of when writing code that communicates with servers from a web page is that web protocols come in two flavours, standard HTTP (non-encrypted data transfer) and HTTPS (encrypted secure data transfer).</p>
<p>The tricky part is that <strong>an app loaded over HTTPS is not allowed to access resources over HTTP</strong>, you must use HTTPS also when loading images, css, scripts, and when using XHR. Web views only allow secure connections from a securely loaded page. This is something to keep in mind when working with Evothings Studio, since Evothings Viewer uses HTTPS to communicate with the server that hooks up to the Workbench.</p>
<p>Similarly if you are using WebSockets (WS) you must use <strong>Secure</strong> WebSockets (WSS).</p>
<p>To sum it up, if you need to access data on a server, the server must support HTTPS or WSS (WebSocket Secure) and it <strong>must be configured with a proper certificate</strong> (not self signed) and the certificate <strong>must include all intermediates</strong>. This is because the Evothings Viewer does not bundle a lot of the known intermediates, as a regular browser typically does.</p>
<h3>Workaround</h3>
<p>To work around this restriction for regular HTTP requests, the <a href="https://github.com/evothings/cordova-HTTP" target="_blank">Cordova HTTP plugin</a> can be used. See below for further details.</p>
<!--<p>If you need to access web content such as over HTTP, you can use Evothings Studio 1.2 as a workaround to the problem with HTTPS. This version uses the local WiFi to connect from the Evothings Client app to Evothings Workbench. Read more about the <a href="../studio/evothings-studio-1.2.html#Difference">differences between Evothings Studio 1.2 and Evothings Studio 2.0</a>.</p>-->

<h2>Network programming</h2>

<p>A mobile phone uses TCP (or UPD) sockets to communicate with servers, either over WiFi or 3G/4G. Here are the ways available for hybrid HTML/JavaScript apps to do network programming.</p>

<h3>XHR (XMLHttpRequest - also known as "Ajax")</h3>

<p>With XHR ("Ajax requests") it is possible to communicate with servers right from JavaScript with no native plugins.</p>
<p>Keep in mind that the server must support HTTPS when you use Evothings Studio (see section above for explanation).</p>
<p>If you use the <a href="http://jquery.com/" target="_blank">jQuery</a> library, it is easy to DO XHR calls using the <a href="http://api.jquery.com/jquery.ajax/" target="_blank">ajax()</a> function.</p>

<h3>WebSockets (WS or WSS)</h3>
<p>WebSockets is the latest technology for communicating with servers right from JavaScript. Note again that you need to use <strong>Secure WebSockets</strong> when you are running in the viewer served via the Workbench, as described above. See our articles around MQTT below for more details around WebSockets since that is the protocol used to talk to the MQTT servers.

<h3>Cordova HTTP plugin</h3>
<p>Using the plugin <a href="https://github.com/evothings/cordova-HTTP" target="_blank">cordova-HTTP</a> you can access and download data from any server, without HTTPS/HTTP restrictions or cross-origin restrictions.</p>
<p>With this plugin the app can fetch JSON data, HTML code, basically any text-encoded data. Fetching binary data is not supported. You can also upload JSON data with this plugin.</p>
<p>The HTTP plugin is included with Evothings Viewer.</p>

<h3>Chrome Sockets - TCP networking support</h3>
<p>The <a href="https://github.com/MobileChromeApps?utf8=%E2%9C%93&query=cordova-plugin-chrome-apps-sockets" target="_blank">Mobile Chrome Apps socket plugins</a> can be used to access data and communicate with servers using the basic TPC protocol. The UPD protocol is also supported, but is not commonly used by IoT Cloud services.</p>
<p>Have a look at the <a href="https://developer.chrome.com/apps/sockets_tcp" target="_blank">API reference for the Chrome Socket TCP plugin</a>.</p>
<p>This plugin is included with Evothings Viewer.</p>

<h3>Custom plugins</h3>
<p>As a final option for communicating with servers and Cloud services, you can write a custom Cordova plugin. Consult the Apache Cordova documentation for an overview of how to make your own plugin.</p>

<h2>Cloud tutorials</h2>
<ul>
<li><a href="https://evothings.com/pushing-sensor-data-onto-amazon-aws-from-scratch-in-15-minutes/" target="_blank">Pushing sensor data onto AWS from scratch in 15 minutes</a></li>
<li><a href="https://evothings.com/how-to-make-a-mobile-iot-app-for-the-facebook-parse-data-cloud/" target="_blank">How to make a mobile IoT app for the Facebook Parse data cloud</a></li>
<li><a href="https://evothings.com/using-google-charts-in-your-app-to-visualise-data-from-parse-iot-cloud/" target="_blank">Using Google Charts in your app to visualise data from Parse IoT cloud</a></li>
<li><a href="https://evothings.com/evothings-does-mqtt-with-bluemix/" target="_blank">Evothings does MQTT with IBM Bluemix</a></li>
<li><a href="https://evothings.com/evothings-phoenix-neato/" target="_blank">Evothings + Phoenix = Neato</a></li>
<li><a href="https://evothings.com/evothings-does-mqtt-with-vernemq-or-emqtt/" target="_blank">Evothings does MQTT with VerneMQ or EMQTT</a></li>
</ul>

<h2>Related tutorials</h2>
<ul>
<li><a href="evothings-studio-starter-guide.html/">Evothings Starter Guide - Getting started with Evothings Studio</li>
<li><a href="cordova-starter-guide.html">Cordova Starter Guide - Guide to building native apps</a></li>
<li><a href="https://evothings.com/download/">Evothings download page</a></li>
</ul>

</div><!-- evo-content-box -->

<script src="../js/include-page-footer.js"></script>
</div><!-- evo-page-content -->
</div><!-- evo-page -->

</body>
</html>
